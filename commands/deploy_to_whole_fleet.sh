#!/bin/bash

source ./check_env_file.sh

versionname="${1}"

if [ -z "$1" ]
  then
    echo
    echo "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
    echo
    echo "Enter release version | git checkout ...|:?"
    read -r versionname
fi

echo
echo '======================================================================'
echo 'Start 1/4 - deploy_default_us_east_1 ...'
echo '======================================================================'
echo
source deploy_default_us_east_1.sh "${versionname}"
echo
echo '**********************************************************************'
echo 'End 1/4 - deploy_default_us_east_1'
echo '**********************************************************************'
echo
echo '======================================================================'
echo 'Start 2/4 - deploy_prod_eu_west_1 ...'
echo '======================================================================'
echo
source deploy_prod_eu_west_1.sh "${versionname}"
echo
echo '**********************************************************************'
echo 'End 2/4 - deploy_prod_eu_west_1'
echo '**********************************************************************'
echo
echo '======================================================================'
echo 'Start 3/4 - deploy_prod_us_east_1 ..'
echo '======================================================================'
echo
source deploy_prod_us_east_1.sh "${versionname}"
echo
echo '**********************************************************************'
echo 'End 3/4 - deploy_prod_us_east_1'
echo '**********************************************************************'
echo
echo '======================================================================'
echo 'Start 4/4 - deploy_kohls ...'
echo '======================================================================'
echo
source deploy_kohls.sh "${versionname}"
echo
echo '**********************************************************************'
echo 'End 4/4 - deploy_kohls'
echo '**********************************************************************'
echo


echo
echo "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
echo "~                              SUCCESS                              ~"
echo "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
echo
echo "Release $versionname has been successfully deployed to all instances in all regions "
echo
echo "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
echo "~                              FINISH                               ~"
echo "~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"